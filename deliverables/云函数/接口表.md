## 云函数/接口表（MVP）

| 函数名 | 作用 | 入参（简） | 出参（简） | 是否需登录 | 降级方案 |
|---|---|---|---|---|---|
| createPublishJob | 创建发布任务 | templateId, themeId, assetsMeta[] | {albumId} | 否 | 本地草稿 |
| finalizeUpload | 通知上传完成 | albumId, uploadedAssets[] | {albumId} | 否 | 允许跳过，继续发布 |
| processAssets | 生成多规格 | albumId, assets[] | {assets[]} | 否 | 仅保留原图或仅 thumb/medium |
| generateAiText | 生成文案（Doubao AK/SK） | albumId, templateId, pages[], tone, strength | {result} | 否 | 回退模板默认文案 |
| buildAlbumJson | 固化 album.json | albumId, templateId, music, pages[] | {albumJsonFileId} | 否 | 生成最小可用 album.json |
| generatePoster | 生成 poster.jpg | albumId, coverFileId | {posterFileId} | 否 | 仅输出封面图 |
| getAlbumJson | 拉取 album.json | albumId | album.json | 否 | 返回缓存或本地 mock |
| renderSharePage | 分享落地页 HTML | albumId | {html} / HTTP body | 否 | 返回简化 HTML（无播放器） |
| genShareImg | 生成分享图（5:4） | albumId, coverFileId | {fileId} | 否 | 回退封面图作为分享图 |
| reportAnalytics | 埋点上报 | eventName, albumId?, pageId?, extra? | {stored} | 否 | 丢弃埋点不阻断主流程 |

